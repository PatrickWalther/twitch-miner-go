{{define "title"}}Dashboard - Twitch Points Miner{{end}}

{{define "content"}}
<h1>Dashboard</h1>

<section class="grid">
    <article>
        <h2 class="stat-value">{{.TotalPoints}}</h2>
        <p>Total Points</p>
    </article>
    <article>
        <h2 class="stat-value">{{.StreamerCount}}</h2>
        <p>Streamers</p>
    </article>
    <article>
        <h2 class="stat-value">{{.PointsToday}}</h2>
        <p>Points Today</p>
    </article>
</section>

<section 
    hx-get="/api/streamers" 
    hx-trigger="load, every {{.RefreshMinutes}}m"
    hx-swap="innerHTML"
>
    <div class="loading">Loading streamers...</div>
</section>
{{end}}

{{define "scripts"}}
<script>
    function formatNumber(num) {
        return new Intl.NumberFormat().format(num);
    }
    
    function timeAgo(timestamp) {
        if (!timestamp) return 'Never';
        const seconds = Math.floor((Date.now() - timestamp) / 1000);
        if (seconds < 60) return 'Just now';
        if (seconds < 3600) return Math.floor(seconds / 60) + 'm ago';
        if (seconds < 86400) return Math.floor(seconds / 3600) + 'h ago';
        return Math.floor(seconds / 86400) + 'd ago';
    }
</script>
{{end}}
